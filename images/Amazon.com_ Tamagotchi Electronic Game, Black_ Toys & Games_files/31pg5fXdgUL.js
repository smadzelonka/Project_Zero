(function(e){var u=window.AmazonUIPageJS||window.P,x=u._namespace||u.attributeErrors,a=x?x("DetailPageTwisterViewAsset",""):u;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,u,x){e.when("A","dp-refresh-handler","view-util","twister-string-constants","dp-interactive-page-refresh-handler","twister-dimension-subview-promise-handler").register("page-refresh-view",function(a,H,f,l,w,q){function r(q,t,m){function r(c){return{chunk:function(d){var c=d.ASIN,g=d.Value;
d=d.FeatureName;if("twister-slot-price_feature_div"==d){var g=g?g.content:null,b=n(".swatchSelect .twisterSwatchPrice").html(),k=n(".swatchSelect .price_slot_ppu").html();b&&g&&g.priceToSet&&(b=a.trim(b),g.priceToSet!==b&&(n(".swatchSelect .twisterSwatchPrice").html(g.priceToSet),z("twisterUpdatePriceMismatch")));k&&g&&g.hasPricePerUnit&&g.pricePerUnitDisplay&&(k=a.trim(k),g.pricePerUnitDisplay!==k&&(n(".swatchSelect .price_slot_ppu").html(g.pricePerUnitDisplay),z("twisterUpdatePricePerUnitMismatch")))}h.twisterRefreshHandler.stampFeature(d,
c)},success:function(d,c,g){z("twisterUpdateSuccess");w.updateRenderTime()},error:function(d,c,g){Twister.$("#variations-overlay").hide();z("twisterUpdateFailure");Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload())},abort:function(d){C.logFatal("Ajax aborted: "+d)},timeout:4E4}}function D(c,d,p,g,b){var k=[];"parent"===c?(d=B(d,g,"parent",b),k.parent=d,d=B(p,g,"partial",b),k.partial=d):(d=B(p,g,c,b),k[c]=d);return k}function y(c,d,p,g,b){for(var k in c)if(c.hasOwnProperty(k)){if("full"===
k){var v=p.dimensionType,m=h.twisterUtil.getDimensionInfo().length,l=p.dimensionDisplayType,f=p.newAsin,w=b&&(a.state("dp-twister-csm")||{}).updateCSMPageTypeId;h.twisterRefreshHandler.startMeasurement(f,v,m,l,w?f:void 0,w?["is-twister","parentAsin-"+E]:void 0)}v=c[k].twisterRefreshParams;m=c[k].notifyClientParams;b&&(h.twisterRefreshHandler.fadeInFeatures(h.config[k].affectedFeatures),h.twisterRefreshHandler.doPageRefresh(v,d,g));J(m.asin,m.id,k,b)}}function v(){n.each(t.contextMetaData,function(c,
d){var p={};d=d.elementList||[];var g=d.length,b=[];p.click={};p.mouseOver={};for(var k=0;k<g;k++){var a=n("#"+d[k].divToUpdate);b.push(d[k].divToUpdate);a.length&&d[k].customClientFunction&&(d[k].updateOnHover&&(p.mouseOver[d[k].divToUpdate]=a.attr("customfunctionname")),p.click[d[k].divToUpdate]=a.attr("customfunctionname"))}h.config[c].affectedFeatures=b;h.config[c].clientFeatures=p})}function J(c,d,p,g){var b="",b=g?l.EVENT_TYPE_CLICK:l.EVENT_TYPE_MOUSEOVER;n.each(h.config[p].clientFeatures[b],
function(b,g){try{var p=function(){h.twisterRefreshHandler.stampImageLoad(c)};(function(){var b={};b.P=e;(function(){eval("var P \x3d this.P;");eval("0, "+g)(d,DetailPage.StateController,p)}).call(b)})()}catch(a){C.logFatal("Client feature - "+b+", threw and exception :- "+a)}})}function B(c,d,p,g){var b={},k={},a={};g="parent"===p?c:"partial"===g?d:c;b.isFlushing=2;b.dpEnvironment=Twister.dpEnvironment;e.now("abPricingFfqp_utils","abPricingFfqp_quantityManager").execute("setQuantityForTwister",function(d,
c){void 0!==d&&void 0!==c&&"T1"===d.getPageState().weblab_DP_PAGE_REFRESH_B2B_QTY_202073&&(b.qty=c.singleton.getCurrentQuantity())});b.asinList=c;b.id=g;b.mType=p;x();b=K(p,b);(p=L())&&(k.isTryState=p);k.triggerEvent=h.twisterFeatureName;k=h.twisterRefreshHandler.createCustomParamsMap(b,k);a.asin=c;a.id=d;return{twisterRefreshParams:k,notifyClientParams:a}}function L(){var c=!1,d=a.state("pwState");d&&(c=d.isTryState);return c}function x(){var c=[];n.each(["full","parent","partial","master"],function(d,
a){n.each(t.contextMetaData[a].mTypeSpecificURLParams,function(d,b){c.push(d)})});h.twisterRefreshHandler.removeParams(c)}function K(c,d){n.each(t.contextMetaData[c].mTypeSpecificURLParams,function(c,g){d[c]=g});return d}function M(c){c=h.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(c.selected_variation_values);h.twisterUtil.isFullySelected(c)?h.currentPageSelectionState="full":h.currentPageSelectionState="partial"}function N(c){var d={};d.config=c.measurement;d.dimensionDisplayType=
c.dimensionsDisplayType;d.storeID=c.storeID;d.productGroupID=c.productGroupID;d.triggerEvent="Twister";return d}function F(c,d){var a;"partial"===c&&"partial"===d&&(a="partial");"partial"===c&&"full"===d&&(a="full");"full"===c&&"partial"===d&&(a="parent");"full"===c&&"full"===d&&(a="full");return a}var h=this,E=t.parent_asin,A=u.ue,G="",C=new m("dpTwisterPageRefreshView");this.twisterUtil=q.util;this.twisterFeatureName="Twister";this.currentPageSelectionState;this.twisterRefreshHandler;this.config=
{partial:{},full:{},parent:{},master:{}};this.hiddenFeatures={intermediateEOS:1,EOS:1};h.viewUtil=new f(q);h.subType;var z=function(c){A&&A.count&&A.count(c,(A.count(c)||0)+1)};(function(){M(t);v();var c={featureName:h.twisterFeatureName},d=N(t);h.twisterRefreshHandler=new H(c,d,null);q.registerPassive({viewAttribution:"DetailPage",viewName:"WebTwisterRefreshView"},{updateView:function(d,c){var b={};if(d!==l.METADATA){var b={},a;a=void 0;if(c)switch(d){case l.VARIATION_CHANGE:a=c.selected().selInfo;
break;case l.VARIATION_PEEK:a=c.peek().selInfo}b.selectionInfo=a;b.dimensionCombination=h.viewUtil.getCurrDimCombId(b.selectionInfo,"_","X");a=h.twisterUtil.isFullySelected(b.dimensionCombination);b.childAsin=h.twisterUtil.getAsinFromSelectionInfo(b.selectionInfo,a);b.newPageSelectionState=a?"full":"partial";b.mTypeForRefresh=F(h.currentPageSelectionState,b.newPageSelectionState);b.newAsin="parent"===b.mTypeForRefresh?E:b.childAsin;b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1;b.twisterCallListParams=
D(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState);b.optionsForTwisterRefresh=r(c);b.pageRefreshMeasure={newAsin:b.newAsin,dimensionType:G,dimensionDisplayType:t.dimensionsDisplayType}}switch(d){case l.VARIATION_CHANGE:h.subType!==l.PRODUCTIZED_VIEW_SUBTYPE&&(y(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,b.doNotAbort,!0),h.currentPageSelectionState=b.newPageSelectionState,h.subType=void 0);break;case l.METADATA:switch(c.subType){case l.DP_STATE_VIEW_SUBTYPE:G=
c.divMetadata.dimDisplayType;break;case l.PRODUCTIZED_VIEW_SUBTYPE:h.subType=c.subType,b.dimensionCombination=c.newDimCombID,b.childAsin=c.childAsin,b.newAsin=c.newAsin,b.newPageSelectionState=h.twisterUtil.isFullySelected(b.dimensionCombination)?"full":"partial",b.mTypeForRefresh=F(h.currentPageSelectionState,b.newPageSelectionState),b.doNotAbort="parent"===b.mTypeForRefresh?!0:!1,b.twisterCallListParams=D(b.mTypeForRefresh,b.newAsin,b.childAsin,b.dimensionCombination,b.newPageSelectionState),b.optionsForTwisterRefresh=
r(c),b.pageRefreshMeasure={newAsin:b.newAsin,dimensionType:c.divMetaData?c.divMetaData.dimDisplayType:void 0,dimensionDisplayType:t.dimensionsDisplayType},y(b.twisterCallListParams,b.optionsForTwisterRefresh,b.pageRefreshMeasure,b.doNotAbort,!0),h.currentPageSelectionState=b.newPageSelectionState}}}})})()}var n=a.$;q.registerDimensionSubView("page-refresh-view",r);return r});e.when("A").register("twister-common-constants",function(a){return{FAMILY_SIZE_BUCKET_LIMITS:[0,3,8,25,50,100,1E3,5E3],DEFAULT_SELECTION_TAG:"defaultSelection",
BottomSheet:{TRIGGERING_CRITERION_BOTTOMSHEET_OPEN:"onBottomsheetOpen",BOTTOM_SHEET_SELECTOR:"#twister_bottom_sheet",OVERFLOW_THRESHOLD:8,BOTTOM_SHEET_INIT_TIME:"dpBottomSheetInitTime",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted"},SortingFiltering:{PRICE_SORT_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetSortingToggleSwitchClickOn",PRICE_SORT_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetSortingToggleSwitchClickOff",PRICE_SORT_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPriceSortingToggleSwitchEnabledStatus",
PRIME_FILTER_TOGGLE_SWITCH_CLICK_ON_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOn",PRIME_FILTER_TOGGLE_SWITCH_CLICK_OFF_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchClickOff",PRIME_FILTER_TOGGLE_SWITCH_ENABLED_STATUS_METRIC:"DPBottomSheetPrimeFilteringToggleSwitchEnabledStatus",SORTING_TYPE_PRICE:"price",SORTING_TYPE_UNSORTED:"unsorted",PREFETCH_AJAX_CALLS_COMPLETED_EVENT:"prefetchAjaxCallsCompleted",TOGGLE_SWITCH_STATE_OFF:"off",TOGGLE_SWITCH_STATE_ON:"on",PRICE_SORTING_ENABLED_PARAMETER:"priceSortingEnabled",
PRICE_SORTING_PRIORITY_NAME_PARAMETER:"priceSortingPriorityName",ALTER_TYPE_NAME_PRICE:"price",ALTER_TYPE_NAME_PRIME:"prime",ALTER_SUB_TYPE_ENABLE:"enable",ALTER_SUB_TYPE_DISABLE:"disable",ALTER_TYPE_SORT:"sort",ALTER_TYPE_FILTER:"filter",PRICE_SORT_TOGGLE_SWITCH_SELECTOR:".priceSortToggleSwitch",PRIME_FILTER_TOGGLE_SWITCH_SELECTOR:".primeFilterToggleSwitch",EXPERIMENT_PRICE_SORTING:"priceSorting",EXPERIMENT_PRIME_FILTERING:"primeFiltering",ATTRIBUTE_PRICE_SORTING_PRIORITY:"priorityName",ATTRIBUTE_SORT_BY_PRICE_STRING:"sortByPriceString",
ATTRIBUTE_SORTED_BY_PRICE_STRING:"sortedByPriceString",ATTRIBUTE_TOOL_NAME:"toolName",TOOL_TYPE_TOGGLE_SWITCH:"toggleSwitch"}}});"use strict";e.when("A","twister-util","ready").execute(function(a,e){var f=u.ue;if(void 0!==a.state("dimensionKeyList"))for(var l in a.state("dimensionKeyList").dimensionKeys)void 0!==l&&(a.on("a:popover:beforeShow:mobile-twister_"+l,function(l){void 0===a.state("twisterInteractability")&&f&&"function"===typeof f.count&&f.count("Twister:blankTwisterSecView",(f.count("Twister:blankTwisterSecView")||
0)+1)}),a.on("a:popover:beforeHide:mobile-twister_"+l,function(a){if(a&&a.popover){a=a.popover.getContent();var l=0<a.find(".aw-twister-row:first").length;a&&!l&&f&&"function"===typeof f.count&&f.count("blankTwisterSecondaryView",(f.count("blankTwisterSecondaryView")||0)+1)}}))});"use strict";e.when("A").register("twister-bottom-sheet-container",function(a){return{getInstance:function(){return this.sheetViewInstance},saveInstance:function(e){this.sheetViewInstance=e;a.trigger("dp:sheet:twister:initialized")}}});
"use strict";e.when("A","a-sheet","jQuery","ready").execute(function(a,e,f){a.on("a:sheet:afterShow:bottom_sheet_mediaMatrix",function(){var a=f("#mediaMatrix_bottomSheet_view_div").find("#format-picker-scroller"),e=a.find("#selected-format"),q=e.offset().left,r=Math.abs(e.width()),e=Math.max(document.documentElement.clientWidth,u.innerWidth||0),r=e-r,n=a.scrollLeft();(q>r||0>=q)&&a.scrollLeft(n+q-e/3)})});e.when("A","view-util","twister-string-constants").register("hover-refresh-view",function(a,
u,f){var l=a.$;return function(w,q,r){function n(){a.each(q.contextMetaData,function(a,e){var v={};a=a.elementList||[];var f=a.length;v.mouseOver=[];for(var l=0;l<f;l++)a[l].customClientFunction&&a[l].updateOnHover&&v.mouseOver.push(a[l].divToUpdate);m.clientFeatures[e]=v})}function x(n,y){a.each(m.clientFeatures[y][f.EVENT_TYPE_MOUSEOVER],function(a){try{var m=l("#"+a),f;m.length&&(f=m.attr("customfunctionname"),function(){var a={};a.P=e;(function(){eval("var P \x3d this.P;");eval("0, "+f)(n,DetailPage.StateController)}).call(a)}())}catch(y){I.logFatal("Client feature - "+
feature+", threw and exception :- "+y)}})}function t(a){a=m.twisterUtil.getSelectionInfoFromSelectedVariationValuesMap(a.selected_variation_values);m.twisterUtil.isFullySelected(a)?m.currentPageSelectionState="full":m.currentPageSelectionState="partial"}var m=this,I=new r("dpTwisterHoverRefreshView");this.twisterUtil=w.util;this.twisterFeatureName="TwisterHover";this.currentPageSelectionState;this.clientFeatures={partial:{},full:{},parent:{},master:{}};m.viewUtil=new u(w);m.subType=void 0;(function(){function l(a){a=
m.viewUtil.getCurrDimCombId(a,"_","X");var f=m.twisterUtil.isFullySelected(a)?"full":"partial",e,n=m.currentPageSelectionState;"partial"===n&&"partial"===f&&(e="partial");"partial"===n&&"full"===f&&(e="full");"full"===n&&"partial"===f&&(e="parent");"full"===n&&"full"===f&&(e="full");f=[e];"parent"===e&&(f=["parent","partial"]);return{clientFeatureToRefresh:f,dimensionCombination:a}}t(q);n();w.registerPassive({viewAttribution:"DetailPageTwister",viewName:"WebTwisterHoverRefreshView"},{updateView:function(e,
n){switch(e){case f.VARIATION_PEEK:var q={};e=n.peek().selInfo;q=l(e);a.each(q.clientFeatureToRefresh,function(a){x(q.dimensionCombination,a)});case f.VARIATION_CHANGE:m.subType!==f.PRODUCTIZED_VIEW_SUBTYPE&&(e=n.selected().selInfo,n=m.viewUtil.getCurrDimCombId(e,"_","X"),m.currentPageSelectionState=m.twisterUtil.isFullySelected(n)?"full":"partial",m.subType=void 0);break;case f.METADATA:switch(n.subType){case f.PRODUCTIZED_VIEW_SUBTYPE:m.subType=n.subType,m.currentPageSelectionState=m.twisterUtil.isFullySelected(n.newDimCombID)?
"full":"partial"}}}})})()}})});